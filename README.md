# 概要
ここでは、私がコードを制作するうえで特にこだわった点やアピールしたい点に絞って紹介します。

# blackjack
Javaを学んでから始めて作ったコードです。
制作期間は1日あたり1～2時間ずつ進めて約1ヵ月程です。
このコードでは、NPCと1対1でブラックジャックをプレイすることができます。

## ポイント

1.カードを引く処理

このコードではArrayListクラスを活用してカードを引く処理を実現しています。
当初はboolean型配列を使って乱数で引いた要素をfalseにしていくことで管理するつもりでした。しかし、この方法ではカードが減るほど乱数の引き直しが必要になる確率が上がるため、非効率だと思いました。
そこでArrayListを使って、引いた要素を削除する方法を思いつきました。ArrayListは要素を削除した際に勝手に前に詰める仕様なので、乱数の範囲を減らす処理を行うだけで済み、乱数の引き直しは発生しません。
この仕様は要素数が増えるほど効率が落ちますが、今回は52要素だけなので問題ないと判断し、ArrayListを採用しました。

2.NPCの手札追加判定


人間に近い判定が下せるように、点数次第で引く確率が変動するコードを設計しました。
100(%)から得点に応じた計算を行い、その値を引いた値以上の乱数を引くことで、カードを引く判定になります。


3.Aを引いた際の得点処理

ブラックジャックのルールでは、Aは1点または11点を選択できるというルールがあります。これを実現するために、はじめは11点に設定しておき、21点を超えた場合に自動で1点に変更される仕組みを設計しました。
手札内のAが格納されている要素番号を保存し、バースト判定時にその要素番号を確認して1点に変更した後、再判定を行うという構成になっています。



# blackjack2
Javaをある程度学び、以前より書ける幅が広がったのでblackjackの反省点を改善したコードです。
制作期間は前回と同ペースで約1週間です。


## ポイント(改善点)


1.インターフェースや抽象クラスを使用

これを書いた段階では、まだ使ったことがなかったので試しに使ってみました。
抽象クラス(Player)の枠組みから人間(Pc)とコンピュータ(Npc)のクラスを作っています。
これによって人間の場合の処理とコンピュータの場合の処理が、整然としてわかりやすくなったと思います。


2.Deckクラスのjudge()にiteratorを使用

前回、aceで要素を削除した際にループ用変数をデクリメントさせることで処理していたが、イテレータを使うことにしました。
これにより、処理が簡潔になりとても見やすくなったと思います。



# mastermind
これを作る直前にSetクラスについて学んだので、使ってみたくなりました。
そこで、以前C言語で作ったものをJavaに書き直し、機能を補強しました。
制作期間は約3週間程です。


## ポイント


1.例外クラスを自作

blackjackでも例外処理は使っていましたが、今回は例外クラスを作ることもやってみました。HumanクラスのdecideValue()にて自作例外クラスを活用しています。
GameRuleインターフェースで設定している定数DIGIT(桁数)に満たない場合に、今回自作したDigitExceptionをスローする構成としています。


2.使い回ししやすいメソッド

このコードでは、プレイヤーへルール説明の要否と再挑戦するかを聞く箇所があります。当初はそれぞれ別のメソッドにしようと考えていたのですが、問いかけの内容以外は処理が同じことに気づいたので、メソッドを統一できないか検討しました。
そこで、問いの文字列を受け取ってYes/Noを聞くメソッドに修正しました。


3.Setの特徴を活用

マスターマインドでは値が重複してはいけないのでSetを使うこととしました。
Setの特徴として、重複した値を無視するというものがあります。そのため、値の重複チェックをせずとも重複のない値を得ることができます。C言語で作ったときはここに悩まされたので、Javaの便利さに感動しました。



# 反省
自作コードを公開するにあたって、反省すべき点を見つけたので列記します。

1.可読性が低い

自身のコードを見直して、メソッドの引数にメソッドを渡すことが多いと思いました。
わざわざ変数にするまでもないような、1回しか使わない値は直に渡しがちなのでものによっては非常に読みにくくなると感じました。
また、コードを書くときに可読性より動くかどうかを優先してしまう節があるので、これから書くコードでは読み手のことも意識したいと思います。


2.ネストが深い

C言語からずっと続いている癖なのですが、動かすことを優先するあまり2重ループしている中にif文を記述して、さらにそのif文の中にif文を入れてしまうことがあります。
この規模のコードならまだしも、実務で同じようなことをすると保守性が下がる恐れがあるので、switch文なども積極的に使ってネストが深くなりすぎないよう工夫しようと思います。


3.思い付きで書いてしまう

私のコードの制作方法として、メモでざっくり設計した後に思いつくところから書いていき、必要なものを継ぎ足して完成に近づけていくので完成時の出来がかなりぐちゃぐちゃになってしまうことがあります。特に1作目のblackjackに顕著に表れていると思います。
これを防ぐために、先に設計を詰めて仕様書を書くべきだと思いました。そうすれば、人に見せるときも、コードを書くのに時間が空いてしまったときもすぐにわかるので、結果的に時間短縮につながると思います。
いきなり本格的なものを書くのは難しいと思うので、まずは出来を度外視して仕様書として起こすことに挑戦しようと思います。